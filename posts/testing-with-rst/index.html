<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="A re-post to make sure I can get the site working.">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Testing With RST | p5.js (processing) Explorations</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/ipython.min.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/nikola_ipython.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" href="../../rss.xml">
<link rel="canonical" href="https://necromuralist.github.io/p5_explorations/posts/testing-with-rst/">
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"] ],
        displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
        processEscapes: true
    },
    displayAlign: 'left', // Change this to 'center' to center equations.
    "HTML-CSS": {
        styles: {'.MathJax_Display': {"margin": 0}}
    }
});
</script><!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><script type="text/javascript" async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
</script><meta name="author" content="The Cloistered Monkey">
<link rel="next" href="../re-testing-with-meta-template-plugin/" title="Re-Testing With meta-template Plugin" type="text/html">
<meta property="og:site_name" content="p5.js (processing) Explorations">
<meta property="og:title" content="Testing With RST">
<meta property="og:url" content="https://necromuralist.github.io/p5_explorations/posts/testing-with-rst/">
<meta property="og:description" content="A re-post to make sure I can get the site working.">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2017-05-07T14:59:44-07:00">
<meta property="article:tag" content="processing p5 nikola">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-default navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://necromuralist.github.io/p5_explorations/">

                <span id="blog-title">p5.js (processing) Explorations</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../archive.html">Archive</a>
                </li>
<li>
<a href="../../categories/">Tags</a>
                </li>
<li>
<a href="../../rss.xml">RSS feed</a>
            </li>
<li class="dropdown">
<a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Projects <b class="caret"></b></a>
            <ul class="dropdown-menu">
<li>
<a href="../../machine-learning-projects/">Machine Learning</a>
                    </li>
<li>
<a href="https://necromuralist.github.io/p5_explorations/">P5 Explorations</a>
                    </li>
<li>
<a href="https://necromuralist.github.io/tddmachinelearning/">TDD Machine Learning</a>
                    </li>
<li>
<a href="https://necromuralist.github.io/student_intervention/">Student Intervention Project</a>
                    </li>
<li>
<a href="https://necromuralist.github.io/boston_housing/">Boston Housing Project</a>
            </li>
</ul>
</li>
</ul>
<!-- Google custom search --><form method="get" action="https://www.google.com/search" class="navbar-form navbar-right" role="search">
<div class="form-group">
<input type="text" name="q" class="form-control" placeholder="Search">
</div>
<button type="submit" class="btn btn-primary">
	<span class="glyphicon glyphicon-search"></span>
</button>
<input type="hidden" name="sitesearch" value="https://necromuralist.github.io/p5_explorations/">
</form>
<!-- End of custom search -->


            <ul class="nav navbar-nav navbar-right">
<li>
    <a href="index.rst" id="sourcelink">Source</a>
    </li>

                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">Testing With RST</a></h1>

        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                    The Cloistered Monkey
            </span></p>
            <p class="dateline"><a href="." rel="bookmark"><time class="published dt-published" datetime="2017-05-07T14:59:44-07:00" itemprop="datePublished" title="2017-05-07 14:59">2017-05-07 14:59</time></a></p>
            
        <p class="sourceline"><a href="index.rst" id="sourcelink">Source</a></p>

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <div>
<p>This is a re-do of an <a class="reference external" href="https://necromuralist.github.io/posts/processing-test/">old post</a> I made to <a class="reference external" href="https://necromuralist.github.io/">my main site</a> about making a <a class="reference external" href="http://p5js.org/">p5</a> restructured-text post in <a class="reference external" href="https://www.getnikola.com/handbook.html">nikola</a> based on the p5 <a class="reference external" href="http://p5js.org/get-started/">get started</a> tutorial. I'm repeating it to make sure I can get it to work here, since it's been so long since I've done it.</p>
<p>First the link to the p5 code:</p>
<pre class="code html"><a name="rest_code_adaf74a4659d4f68a4de33e14786ecd1-1"></a><span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">"https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.5.8/p5.min.js"</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</pre>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">On the old post I had included the html tag directly in the post (using the <tt class="docutils literal">.. raw::</tt> directive), but I thought that would be wasteful since you can have multiple posts on one page so I moved it the the <tt class="docutils literal">BODY_END</tt> variable in the <tt class="docutils literal">conf.py</tt> file which adds it to the end of the HTML body.</p>
</div>
<p>And now to include the sketch in the post. The naming of the <tt class="docutils literal">div</tt> is important (<tt class="docutils literal">"get_started"</tt> in this case) - the javascript has to reference it (in the <tt class="docutils literal"><span class="pre">canvas.parent("get_started")</span></tt> line) or the sketch will not appear right here (see the notes below). I'm also using it to get the width for the image - kind of fragile I guess, but what can you do?</p>
<pre class="code html"><a name="rest_code_b65fae19c63d4bc5a8def0ed1fccded6-1"></a><span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">"get_started"</span><span class="p">&gt;</span>
<a name="rest_code_b65fae19c63d4bc5a8def0ed1fccded6-2"></a>    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">language</span><span class="o">=</span><span class="s">"javascript"</span> <span class="na">type</span><span class="o">=</span><span class="s">"text/javascript"</span> <span class="na">src</span><span class="o">=</span><span class="s">'get_started.js'</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<a name="rest_code_b65fae19c63d4bc5a8def0ed1fccded6-3"></a><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</pre>
<div id="get_started">
   <script language="javascript" type="text/javascript" src="get_started.js"></script>
</div>
<p>If you can't tell, there's a processing sketch in that blank box above this line. If you move your mouse over it p5 will draw some circles with the radii based on how fast your mouse is moving. If you click and drag it inverts the colors.</p>
<p>Here's the javascript that created it.</p>
<p><a class="reference external" href="../../listings/get_started.js.html">get_started.js</a>  <a class="reference external" href="../../listings/get_started.js">(Source)</a></p>
<pre class="code javascript"><a name="rest_code_9737f23131634e529ff32ebafb2b1e07-1"></a><span class="kd">function</span> <span class="nx">setup</span><span class="p">()</span> <span class="p">{</span>
<a name="rest_code_9737f23131634e529ff32ebafb2b1e07-2"></a>  <span class="kd">var</span> <span class="nx">parent_div_id</span> <span class="o">=</span> <span class="s2">"get_started"</span><span class="p">;</span>
<a name="rest_code_9737f23131634e529ff32ebafb2b1e07-3"></a>  <span class="c1">// this sets the width of the canvas to match the div (center column)</span>
<a name="rest_code_9737f23131634e529ff32ebafb2b1e07-4"></a>  <span class="nx">canvas</span> <span class="o">=</span> <span class="nx">createCanvas</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"#"</span> <span class="o">+</span> <span class="nx">parent_div_id</span><span class="p">).</span><span class="nx">outerWidth</span><span class="p">(</span><span class="kc">true</span><span class="p">),</span> <span class="mi">300</span><span class="p">);</span>
<a name="rest_code_9737f23131634e529ff32ebafb2b1e07-5"></a>  <span class="nx">canvas</span><span class="p">.</span><span class="nx">parent</span><span class="p">(</span><span class="nx">parent_div_id</span><span class="p">);</span>
<a name="rest_code_9737f23131634e529ff32ebafb2b1e07-6"></a>  <span class="nx">background</span><span class="p">(</span><span class="mi">255</span><span class="p">);</span>
<a name="rest_code_9737f23131634e529ff32ebafb2b1e07-7"></a>  <span class="nx">strokeWeight</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
<a name="rest_code_9737f23131634e529ff32ebafb2b1e07-8"></a>  <span class="nx">stroke</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">);</span>
<a name="rest_code_9737f23131634e529ff32ebafb2b1e07-9"></a>  <span class="nx">fill</span><span class="p">(</span><span class="mi">255</span><span class="p">);</span>
<a name="rest_code_9737f23131634e529ff32ebafb2b1e07-10"></a><span class="p">}</span>
<a name="rest_code_9737f23131634e529ff32ebafb2b1e07-11"></a>
<a name="rest_code_9737f23131634e529ff32ebafb2b1e07-12"></a><span class="kd">function</span> <span class="nx">mousePressed</span><span class="p">()</span> <span class="p">{</span>
<a name="rest_code_9737f23131634e529ff32ebafb2b1e07-13"></a>  <span class="cm">/* set background to blue */</span>
<a name="rest_code_9737f23131634e529ff32ebafb2b1e07-14"></a>  <span class="nx">background</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">);</span>
<a name="rest_code_9737f23131634e529ff32ebafb2b1e07-15"></a><span class="p">}</span>
<a name="rest_code_9737f23131634e529ff32ebafb2b1e07-16"></a>
<a name="rest_code_9737f23131634e529ff32ebafb2b1e07-17"></a><span class="kd">function</span> <span class="nx">mouseReleased</span><span class="p">()</span> <span class="p">{</span>
<a name="rest_code_9737f23131634e529ff32ebafb2b1e07-18"></a>  <span class="cm">/* set background to white */</span>
<a name="rest_code_9737f23131634e529ff32ebafb2b1e07-19"></a>  <span class="nx">background</span><span class="p">(</span><span class="mi">255</span><span class="p">);</span>
<a name="rest_code_9737f23131634e529ff32ebafb2b1e07-20"></a><span class="p">}</span>
<a name="rest_code_9737f23131634e529ff32ebafb2b1e07-21"></a>
<a name="rest_code_9737f23131634e529ff32ebafb2b1e07-22"></a><span class="kd">function</span> <span class="nx">draw</span><span class="p">()</span> <span class="p">{</span>
<a name="rest_code_9737f23131634e529ff32ebafb2b1e07-23"></a>  <span class="kd">var</span> <span class="nx">diameter</span><span class="p">;</span>
<a name="rest_code_9737f23131634e529ff32ebafb2b1e07-24"></a>  <span class="cm">/* Draw circles that change diameter based on mouse speed */</span>
<a name="rest_code_9737f23131634e529ff32ebafb2b1e07-25"></a>  <span class="cm">/* and color based on if mouse-pressed (or not pressed)   */</span>
<a name="rest_code_9737f23131634e529ff32ebafb2b1e07-26"></a>  <span class="k">if</span> <span class="p">(</span><span class="nx">mouseIsPressed</span><span class="p">)</span> <span class="p">{</span>
<a name="rest_code_9737f23131634e529ff32ebafb2b1e07-27"></a>    <span class="nx">fill</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">);</span>
<a name="rest_code_9737f23131634e529ff32ebafb2b1e07-28"></a>    <span class="nx">stroke</span><span class="p">(</span><span class="mi">255</span><span class="p">);</span>
<a name="rest_code_9737f23131634e529ff32ebafb2b1e07-29"></a>  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
<a name="rest_code_9737f23131634e529ff32ebafb2b1e07-30"></a>    <span class="nx">fill</span><span class="p">(</span><span class="mi">255</span><span class="p">);</span>
<a name="rest_code_9737f23131634e529ff32ebafb2b1e07-31"></a>    <span class="nx">stroke</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">);</span>
<a name="rest_code_9737f23131634e529ff32ebafb2b1e07-32"></a>  <span class="p">}</span>
<a name="rest_code_9737f23131634e529ff32ebafb2b1e07-33"></a>  <span class="nx">diameter</span> <span class="o">=</span> <span class="nx">pow</span><span class="p">(</span><span class="nx">dist</span><span class="p">(</span><span class="nx">pmouseX</span><span class="p">,</span> <span class="nx">pmouseY</span><span class="p">,</span> <span class="nx">mouseX</span><span class="p">,</span> <span class="nx">mouseY</span><span class="p">),</span> <span class="mf">1.5</span><span class="p">);</span>
<a name="rest_code_9737f23131634e529ff32ebafb2b1e07-34"></a>  <span class="nx">ellipse</span><span class="p">(</span><span class="nx">mouseX</span><span class="p">,</span> <span class="nx">mouseY</span><span class="p">,</span> <span class="nx">diameter</span><span class="p">,</span> <span class="nx">diameter</span><span class="p">);</span>
<a name="rest_code_9737f23131634e529ff32ebafb2b1e07-35"></a><span class="p">}</span>
</pre>
<div class="section" id="notes">
<h2>Notes</h2>
<ul class="simple">
<li>In order to get the javascript into the final HTML you need to put in the <tt class="docutils literal">listings</tt> folder at the root of the nikola folder and use the <a class="reference external" href="https://www.getnikola.com/handbook.html#listing">listing</a> <cite>reStructuredText</cite> directive instead of <tt class="docutils literal">include</tt> (this is a special <em>nikola</em> directive). This not only shows it but creates two links - the one with the file name links to a formatted version of the code and the <cite>(Source)</cite> link lets you download it as plain-text. Showing the code and creating another page seemed kind of redundant to me, but I think the purpose is to provide <a class="reference external" href="https://necromuralist.github.io/p5_explorations/listings/get_started.js.html">a link you can refer to outside of this post</a>. You can't see it but it says:</li>
</ul>
<pre class="code rst"><a name="rest_code_44b54fab0d1e45e2be5063215fbf216c-1"></a><span class="p">..</span> <span class="ow">listing</span><span class="p">::</span> get_started.js javascript
</pre>
<ul class="simple">
<li>to get the sketch to stay in the post (instead of showing up on the bottom of the page), you have to use the div trick - create a <cite>div</cite> where you want the sketch to be and give it a unique ID (use the <tt class="docutils literal">raw</tt> <em>reStructuredText</em> to put the HTML tags displayed above into the post), then set the parent in the sketch (<tt class="docutils literal"><span class="pre">canvas.parent("get_started")</span></tt> in this example).</li>
<li>Another thing I forgot to mention in the other post was that <em>nikola</em> looks for the javascript (when it includes it in the html, not when it wants to display it as in the first note) in the <tt class="docutils literal"><span class="pre">files/posts/&lt;post-name-slugified&gt;/</span></tt> directory, so in this case, besides putting the javascript in the listings folder, I also had to put another copy of it in <tt class="docutils literal"><span class="pre">files/posts/testing-with-rst/</span></tt>. There must be an easier way. Well, I guess it's not hard, it just seems inefficient.</li>
</ul>
</div>
</div>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/processing-p5-nikola/" rel="tag">processing p5 nikola</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="next">
                <a href="../re-testing-with-meta-template-plugin/" rel="next" title="Re-Testing With meta-template Plugin">Next post</a>
            </li>
        </ul></nav></aside></article>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2017         <a href="mailto:necromuralist@gmail.com/p5_explorations">The Cloistered Monkey</a> - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>         <a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/88x31.png"></a><br>This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.
            
        </footer>
</div>
</div>


            <script src="../../assets/js/all-nocdn.js"></script><script>$('a.image-reference:not(.islink) img:not(.islink)').parent().colorbox({rel:"gal",maxWidth:"100%",maxHeight:"100%",scalePhotos:true});</script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.5.8/p5.min.js">
</script>
</body>
</html>
